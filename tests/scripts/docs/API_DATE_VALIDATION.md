# Linear API Date Validation Report

**Test Date:** 2025-10-29
**Total Tests:** 20
**Passed:** 18
**Failed:** 2

## Summary

This report documents the empirical testing of Linear's GraphQL API date field acceptance for project `startDate` and `targetDate` fields.

### Key Findings

1. **ISO Date Format**: Linear strictly requires `YYYY-MM-DD` format
2. **Date Validation**: Linear validates calendar dates (rejects Feb 30, etc.)
3. **Resolution Field**: Optional field that controls display precision
4. **Edge Cases**: Linear accepts any valid date with any resolution (doesn't enforce alignment)

## Test Results

### ISO Date Format Tests

| Test | Date | Expected | Result | Notes |
|------|------|----------|--------|-------|
| Valid ISO date (Jan 15) | `2025-01-15` | Pass | ✅ | Stored as 2025-01-15 |
| Valid ISO date (Dec 31) | `2025-12-31` | Pass | ✅ | Stored as 2025-12-31 |
| Valid leap year date | `2024-02-29` | Pass | ✅ | Stored as 2024-02-29 |
| Invalid month (13) | `2025-13-01` | Fail | ✅ | Variable "$input" got invalid value "2025-13-01" at "input.startDate"; Expected type "TimelessDate". Unable to parse value '2025-13-01' into a valid date |
| Invalid day (32) | `2025-01-32` | Fail | ✅ | Variable "$input" got invalid value "2025-01-32" at "input.startDate"; Expected type "TimelessDate". Unable to parse value '2025-01-32' into a valid date |
| Invalid leap year | `2025-02-29` | Fail | ❌ | Stored as 2025-03-01 |
| Invalid day (Feb 30) | `2025-02-30` | Fail | ❌ | Stored as 2025-03-02 |

### Resolution Combination Tests

| Test | Date | Resolution | Result | Stored As | Display |
|------|------|------------|--------|-----------|---------|
| Q1 start + quarter | `2025-01-01` | quarter | ✅ | 2025-01-01 | quarter |
| Q2 start + quarter | `2025-04-01` | quarter | ✅ | 2025-04-01 | quarter |
| Q3 start + quarter | `2025-07-01` | quarter | ✅ | 2025-07-01 | quarter |
| Q4 start + quarter | `2025-10-01` | quarter | ✅ | 2025-10-01 | quarter |
| H1 start + halfYear | `2025-01-01` | halfYear | ✅ | 2025-01-01 | halfYear |
| H2 start + halfYear | `2025-07-01` | halfYear | ✅ | 2025-07-01 | halfYear |
| Jan + month | `2025-01-01` | month | ✅ | 2025-01-01 | month |
| Dec + month | `2025-12-01` | month | ✅ | 2025-12-01 | month |
| Year start + year | `2025-01-01` | year | ✅ | 2025-01-01 | year |

### Edge Case Tests

| Test | Date | Resolution | Result | Notes |
|------|------|------------|--------|-------|
| Mid-month + month resolution | `2025-01-15` | month | ✅ | Linear accepts this combination |
| Mid-quarter + quarter resolution | `2025-02-15` | quarter | ✅ | Linear accepts this combination |
| Wrong Q1 start + quarter | `2025-02-01` | quarter | ✅ | Linear accepts this combination |
| Wrong H2 start + halfYear | `2025-06-01` | halfYear | ✅ | Linear accepts this combination |

## Recommendations for Parser Implementation

Based on these findings, the date parser should:

1. **Always output ISO 8601 format** (`YYYY-MM-DD`)
2. **Map quarters to correct start dates**:
   - Q1 → January 1 (`YYYY-01-01`)
   - Q2 → April 1 (`YYYY-04-01`)
   - Q3 → July 1 (`YYYY-07-01`)
   - Q4 → October 1 (`YYYY-10-01`)
3. **Map half-years to correct start dates**:
   - H1 → January 1 (`YYYY-01-01`)
   - H2 → July 1 (`YYYY-07-01`)
4. **Map months to first day**: `YYYY-MM-01`
5. **Map years to January 1**: `YYYY-01-01`
6. **Set resolution field appropriately**:
   - Quarter input → `resolution: 'quarter'`
   - Month input → `resolution: 'month'`
   - Year input → `resolution: 'year'`
   - Specific date → `resolution: undefined`

## Important Notes

- **Linear doesn't enforce resolution alignment**: You can use `2025-01-15` with `resolution: 'month'`, and Linear will accept it. However, for best UX, the parser should always use the first day of the period.
- **Date validation is strict**: Linear rejects invalid calendar dates (Feb 30, month 13, etc.)
- **Resolution is optional**: Omitting resolution treats the date as a specific day

## Cleanup

Test projects created with identifier prefix `TEST_DATE_VALIDATION_` should be deleted manually via Linear UI.

  **Project IDs created during this test:**
- c6ed645f-07bb-4cc1-b6b6-d926f9388c69
- 400d02ce-9f0f-45c1-836a-8b84f6f767fc
- 3a3d2855-aa02-4250-a4ea-ad2cb268bffa
- 94e6a048-2592-49ad-831a-bafe36926de1
- 2d4ccd77-286a-4a00-bcf8-02593275eced
- 99c15fed-b22a-4c2a-b30e-086f8820fd31
- 1a889fe5-7784-4f9d-9725-0c75ee15bd6f
- 538c72b1-ce4c-4f8b-8a29-850fffcb87a7
- c9376b0b-7dc8-4d62-a9a4-7373d1aa6e97
- 281bec7e-dc6a-4d4d-9e6f-401337cc3463
- 649eec50-6059-4ced-ade6-0024333b341e
- 49343424-b25f-4cab-bdd1-bfe5d445707c
- e7de0221-9640-459c-9ab8-cd98fb105472
- 7aa698d2-f4ba-429d-8db5-27b8b6badbff
- f161b685-bf6c-4842-b4c5-8adf3d01f1a9
- 1d7bd6e3-e20e-4a03-9f13-5735b3504861
- 3445ec0a-3484-4aed-bbf6-0b87283916b4
- 1c59313f-b222-492f-815f-ea1ff1a07709

---

*Generated by: `tests/scripts/test-api-date-validation.js`*
