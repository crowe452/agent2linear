# Linear API Date Validation Report

**Test Date:** 2025-10-29
**Total Tests:** 20
**Passed:** 18
**Failed:** 2

## Summary

This report documents the empirical testing of Linear's GraphQL API date field acceptance for project `startDate` and `targetDate` fields.

### Key Findings

1. **ISO Date Format**: Linear strictly requires `YYYY-MM-DD` format
2. **Date Validation**: Linear validates calendar dates (rejects Feb 30, etc.)
3. **Resolution Field**: Optional field that controls display precision
4. **Edge Cases**: Linear accepts any valid date with any resolution (doesn't enforce alignment)

## Test Results

### ISO Date Format Tests

| Test | Date | Expected | Result | Notes |
|------|------|----------|--------|-------|
| Valid ISO date (Jan 15) | `2025-01-15` | Pass | ✅ | Stored as 2025-01-15 |
| Valid ISO date (Dec 31) | `2025-12-31` | Pass | ✅ | Stored as 2025-12-31 |
| Valid leap year date | `2024-02-29` | Pass | ✅ | Stored as 2024-02-29 |
| Invalid month (13) | `2025-13-01` | Fail | ✅ | Variable "$input" got invalid value "2025-13-01" at "input.startDate"; Expected type "TimelessDate". Unable to parse value '2025-13-01' into a valid date |
| Invalid day (32) | `2025-01-32` | Fail | ✅ | Variable "$input" got invalid value "2025-01-32" at "input.startDate"; Expected type "TimelessDate". Unable to parse value '2025-01-32' into a valid date |
| Invalid leap year | `2025-02-29` | Fail | ❌ | Stored as 2025-03-01 |
| Invalid day (Feb 30) | `2025-02-30` | Fail | ❌ | Stored as 2025-03-02 |

### Resolution Combination Tests

| Test | Date | Resolution | Result | Stored As | Display |
|------|------|------------|--------|-----------|---------|
| Q1 start + quarter | `2025-01-01` | quarter | ✅ | 2025-01-01 | quarter |
| Q2 start + quarter | `2025-04-01` | quarter | ✅ | 2025-04-01 | quarter |
| Q3 start + quarter | `2025-07-01` | quarter | ✅ | 2025-07-01 | quarter |
| Q4 start + quarter | `2025-10-01` | quarter | ✅ | 2025-10-01 | quarter |
| H1 start + halfYear | `2025-01-01` | halfYear | ✅ | 2025-01-01 | halfYear |
| H2 start + halfYear | `2025-07-01` | halfYear | ✅ | 2025-07-01 | halfYear |
| Jan + month | `2025-01-01` | month | ✅ | 2025-01-01 | month |
| Dec + month | `2025-12-01` | month | ✅ | 2025-12-01 | month |
| Year start + year | `2025-01-01` | year | ✅ | 2025-01-01 | year |

### Edge Case Tests

| Test | Date | Resolution | Result | Notes |
|------|------|------------|--------|-------|
| Mid-month + month resolution | `2025-01-15` | month | ✅ | Linear accepts this combination |
| Mid-quarter + quarter resolution | `2025-02-15` | quarter | ✅ | Linear accepts this combination |
| Wrong Q1 start + quarter | `2025-02-01` | quarter | ✅ | Linear accepts this combination |
| Wrong H2 start + halfYear | `2025-06-01` | halfYear | ✅ | Linear accepts this combination |

## Recommendations for Parser Implementation

Based on these findings, the date parser should:

1. **Always output ISO 8601 format** (`YYYY-MM-DD`)
2. **Map quarters to correct start dates**:
   - Q1 → January 1 (`YYYY-01-01`)
   - Q2 → April 1 (`YYYY-04-01`)
   - Q3 → July 1 (`YYYY-07-01`)
   - Q4 → October 1 (`YYYY-10-01`)
3. **Map half-years to correct start dates**:
   - H1 → January 1 (`YYYY-01-01`)
   - H2 → July 1 (`YYYY-07-01`)
4. **Map months to first day**: `YYYY-MM-01`
5. **Map years to January 1**: `YYYY-01-01`
6. **Set resolution field appropriately**:
   - Quarter input → `resolution: 'quarter'`
   - Month input → `resolution: 'month'`
   - Year input → `resolution: 'year'`
   - Specific date → `resolution: undefined`

## Important Notes

- **Linear doesn't enforce resolution alignment**: You can use `2025-01-15` with `resolution: 'month'`, and Linear will accept it. However, for best UX, the parser should always use the first day of the period.
- **Date validation is strict**: Linear rejects invalid calendar dates (Feb 30, month 13, etc.)
- **Resolution is optional**: Omitting resolution treats the date as a specific day

## Cleanup

Test projects created with identifier prefix `TEST_DATE_VALIDATION_` should be deleted manually via Linear UI.

  **Project IDs created during this test:**
- fe4628e8-e57e-4d2c-a4b9-1346a1a4e900
- 56acc8b2-1d30-471a-9766-6b0cc3def623
- 692d5c4c-3709-437e-bdc3-e3e8597f0ceb
- 14b6584c-b982-42ac-9c6c-2266418e3996
- 42e7ab32-4b36-43f5-83d3-a97994873374
- 58263078-cc52-43b2-8232-ded530f32789
- c39a37ab-39fd-47cf-8ca5-adb3bafeaf6e
- 496d8eb0-0343-42eb-ade5-25963908307f
- 47f424be-b2a7-412c-a7aa-4c6ad5891347
- 37490fd1-56ab-49ad-944c-f9e776f28f5a
- fabcaf07-2b8c-43fe-ab6f-51519006cc01
- 20493c4b-f0b6-43e9-93d8-288ae1515348
- ac1798b3-d3ac-4bf8-b8d1-8aa9b28b334e
- 7af3d32d-3441-4904-8df3-b132c0aa50c3
- fc3e37a3-65b9-4444-898f-0ea0972ccef5
- 4e3294cc-962c-4d45-b163-45c78e759745
- 28cb809a-255e-4bb4-bf0b-5984b9afeb18
- 464c4ce1-4dad-4b09-b84a-6c4e946699ba

---

*Generated by: `tests/scripts/test-api-date-validation.js`*
